<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tip Petesimple - QR Codes</title>
  <meta name="theme-color" content="#0b0b0f" />
  <style>
    :root{
      --bg:#0b0b0f;
      --panel:#141422;
      --text:#f3f4ff;
      --muted:#a7abcc;
      --border:rgba(255,255,255,.10);
      --shadow: 0 14px 40px rgba(0,0,0,.45);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(900px 600px at 10% 0%, rgba(120,120,255,.10), transparent 60%),
                  radial-gradient(900px 600px at 90% 10%, rgba(255,120,200,.08), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    header{
      padding: 28px 18px 10px;
      text-align:center;
    }
    h1{
      margin:0;
      font-size: 28px;
      letter-spacing:.3px;
    }
    .sub{
      margin:10px auto 0;
      max-width: 720px;
      color:var(--muted);
      line-height:1.45;
      font-size:14px;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      margin-top: 18px;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      position: relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-1px;
      background: radial-gradient(600px 200px at 30% 0%, rgba(255,255,255,.06), transparent 60%);
      pointer-events:none;
    }
    .row{
  position:relative;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
}

/* add these */
.info{
  flex: 1 1 auto;
  min-width: 0;            /* critical: allows flex item to shrink */
}

.hint{
  margin: 6px 0 0;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.35;
  overflow: hidden;         /* prevents pushing layout */
  text-overflow: ellipsis;
  white-space: nowrap;      /* keeps it on one line */
}
    .title{
      font-size: 18px;
      font-weight: 700;
      margin: 0;
    }
    
    .qr{
      position:relative;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      padding: 10px;
      width: 148px;
      height: 148px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex: 0 0 auto;
    }
    .link{
      position:relative;
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    a{
      color: #cdd1ff;
      text-decoration: none;
      word-break: break-all;
      font-size: 13px;
    }
    a:hover{ text-decoration: underline; }
    button{
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      color: var(--text);
      padding: 9px 10px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 600;
      font-size: 13px;
    }
    button:hover{ background: rgba(255,255,255,.14); }
    footer{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      padding: 18px 18px 28px;
    }
    .tiny{
      opacity:.9;
    }
    @media (max-width: 520px) {
  .row {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .info {
    width: 100%;
  }

  .title {
    font-size: 20px;
  }

  .hint {
    white-space: normal;
    text-overflow: unset;
    overflow: visible;
    word-break: break-word;
  }

  .qr {
    width: 180px;
    height: 180px;
    margin-bottom: 12px;
  }

  .link {
    flex-direction: column;
    gap: 10px;
  }

  .link a {
    font-size: 14px;
  }

  button {
    width: 100%;
    padding: 12px;
    font-size: 14px;
  }
}
    @media (max-width: 900px) {
  .qr {
    width: 132px;
    height: 132px;
  }
}
    button {
  min-height: 44px; /* iOS tap target */
}

a {
  padding: 6px 0;
  display: inline-block;
}
    .tip-joke{
  margin-top: 10px;
  font-style: italic;
  opacity: .95;
  transition: opacity .25s ease;
}
.tip-joke.fadeout{ opacity: 0; }
    @keyframes rainbowSpin {
  0%   { transform: rotate(0deg);   }
  100% { transform: rotate(360deg); }
}

@keyframes rainbowShift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* full-screen rainbow layer */
body::before{
  content:"";
  position: fixed;
  inset: -35%;                 /* oversized so rotation never shows edges */
  z-index: 0;
  pointer-events: none;

  background:
    conic-gradient(
      from 0deg,
      rgba(255, 0, 102, .22),
      rgba(255, 153, 0, .18),
      rgba(255, 255, 0, .16),
      rgba(0, 255, 153, .18),
      rgba(0, 204, 255, .20),
      rgba(102, 0, 255, .20),
      rgba(255, 0, 204, .20),
      rgba(255, 0, 102, .22)
    );

  filter: blur(40px) saturate(160%);
  opacity: .55;

  animation:
    rainbowSpin 36s linear infinite,
    rainbowShift 18s ease-in-out infinite;
}

/* make sure your actual content sits above the rainbow layer */
header, .wrap, footer{
  position: relative;
  z-index: 1;
}

/* optional: slightly strengthen card readability */
.card{
  backdrop-filter: blur(8px);
}
  </style>
</head>
<body>
  <header>
    <h1>Tip Petesimple - QR Codes</h1>
    <p class="sub">
      Scan a code, send a tip, keep the music moving.
    </p>
    <b><p id="tipJoke" class="sub tip-joke"></p></b>
  </header>

  <div class="wrap">
    <div id="grid" class="grid"></div>
  </div>

  <footer>
    <div class="tiny">Built for quick scanning on phones. Works great on a tablet at the merch table too.</div>
  </footer>

  <!-- QR Code library (client-side) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

  <script>
    // Add more entries here anytime.
    // Tip: for PayPal, include https:// so it becomes a fully qualified URL.
    const TIPS = [
      {
        id: "venmo",
        name: "Venmo",
        subtitle: "@petesimple",
        url: "https://venmo.com/u/petesimple"
      },
      {
        id: "cashapp",
        name: "Cash App",
        subtitle: "$petesimple",
        url: "https://cash.app/$petesimple"
      },
      {
        id: "paypal",
        name: "PayPal",
        subtitle: "paypal.me/PeteLippincott",
        url: "https://paypal.me/PeteLippincott"
      },
      {
        id: "Apple Music",
        name: "Apple Music",
        subtitle: "buy a song or album!",
        url: "https://music.apple.com/us/artist/petesimple/253020124"
      }
    ];
    
    const grid = document.getElementById("grid");

function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

function buildTipJoke(){
  // 12 x 12 x 10 = 1440 combos, plus specials
  const openers = [
    "Tip jar fact","Breaking news","Hot tip","Science update","Guitar report",
    "Band meeting minutes","Merch table memo","This just in","Official statement",
    "Public service announcement","Weather forecast","Totally legal disclaimer"
  ];

  const middles = [
    "this song runs on","this groove is powered by","these guitars are sponsored by",
    "my strings are held together with","the drummer accepts payment in",
    "the bassist demands tribute via","the amp gods require","the set list is fueled by",
    "the encore is unlocked by","this vibe survives thanks to","the soundcheck is paid for with",
    "my rent is gently encouraged by"
  ];

  const closers = [
    "tips and positive energy.",
    "tips only. energy optional.",
    "tips. preferably the money kind.",
    "tips. I promise to spend them irresponsibly on responsible things.",
    "tips. I will not buy more pedals. (I will.)",
    "tips. I will use them to keep the music loud and the guitar fast.",
    "tips. it keeps this whole operation mostly upright.",
    "tips. no refunds, only riffs.",
    "tips. your generosity is my favorite instrument.",
    "tips. scan now, regret nothing."
  ];

  const specials = [
    "If you tip, I will pretend my life is organized for 3 full seconds.",
    "Tip jar challenge: donate one dollar per time you have said 'one more song.'",
    "Warning: tipping may cause spontaneous dancing and better decision making.",
    "This is a tip jar. Not a suggestion jar. Please do not tip me life advice.",
    "Tips go directly to the 'keep doing this' fund. It is dangerously low.",
    "Tip now and I will emotionally support your karaoke career.",
    "If you do not tip, the guitar gets it. The guitar has expensive taste.",
    "Tip jar is like conductors batons: small nudges, big results.",
    "Tip jar status: accepting money, compliments, and mildly heroic legends about me.",
    "Every tip adds +1 to my luck stat for the rest of the night."
  ];

  const useSpecial = Math.random() < 0.30;
  return useSpecial
    ? pick(specials)
    : `${pick(openers)}: ${pick(middles)} ${pick(closers)}`;
}

function nextJokeDifferentFrom(last){
  // try a few times to avoid repeats
  for (let i = 0; i < 8; i++){
    const j = buildTipJoke();
    if (j !== last) return j;
  }
  return buildTipJoke();
}

let jokeTimer = null;

function setTipJoke({ animate = true } = {}){
  const elJoke = document.getElementById("tipJoke");
  if (!elJoke) return;

  let last = elJoke.textContent || "";
  let joke = nextJokeDifferentFrom(last);

  // persist last joke (optional)
  try { localStorage.setItem("lastTipJoke", joke); } catch (e) {}

  if (!animate){
    elJoke.textContent = joke;
    return;
  }

  elJoke.classList.add("fadeout");
  setTimeout(() => {
    elJoke.textContent = joke;
    elJoke.classList.remove("fadeout");
  }, 220);
}

function startJokeRotation(){
  // set one immediately on load
  setTipJoke({ animate: false });

  // rotate every 20 seconds
  if (jokeTimer) clearInterval(jokeTimer);
  jokeTimer = setInterval(() => setTipJoke({ animate: true }), 20000);
}

// Run on load
startJokeRotation();


    
    function el(tag, props = {}, children = []) {
      const node = document.createElement(tag);
      Object.entries(props).forEach(([k, v]) => {
        if (k === "class") node.className = v;
        else if (k === "html") node.innerHTML = v;
        else node.setAttribute(k, v);
      });
      children.forEach(c => node.appendChild(c));
      return node;
    }

    function copyToClipboard(text) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        return navigator.clipboard.writeText(text);
      }
      // Fallback
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      return Promise.resolve();
    }

    function buildCard(entry) {
      const qrBox = el("div", { class: "qr", id: `qr-${entry.id}` });

      const left = el("div", { class: "info" }, [
  el("h2", { class: "title" }, []),
  el("p", { class: "hint" }, [])
]);
      left.querySelector(".title").textContent = entry.name;
      left.querySelector(".hint").textContent = entry.subtitle || "";

      const topRow = el("div", { class: "row" }, [left, qrBox]);

      const linkA = el("a", { href: entry.url, target: "_blank", rel: "noopener noreferrer" });
      linkA.textContent = entry.url;

      const btnCopy = el("button");
      btnCopy.textContent = "Copy link";
      btnCopy.addEventListener("click", async () => {
        await copyToClipboard(entry.url);
        btnCopy.textContent = "Copied!";
        setTimeout(() => (btnCopy.textContent = "Copy link"), 900);
      });

      const bottom = el("div", { class: "link" }, [linkA, btnCopy]);

      const card = el("div", { class: "card" }, [topRow, bottom]);

      // Generate QR after it is in DOM
      setTimeout(() => {
        const size = 120;
        const target = document.getElementById(`qr-${entry.id}`);
        target.innerHTML = "";
        new QRCode(target, {
          text: entry.url,
          width: size,
          height: size,
          correctLevel: QRCode.CorrectLevel.M
        });
      }, 0);

      return card;
    }

    TIPS.forEach(t => grid.appendChild(buildCard(t)));
  </script>
</body>
</html>
